<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø§Ù„ÙŠ</title>
    <style>
        body { font-family: Tahoma; background: #f4f4f4; padding: 30px; }
        h2, h3 { text-align: center; color: #2c3e50; }
        form { background: white; padding: 20px; border-radius: 8px; width: 400px; margin: auto; box-shadow: 0 3px 10px #ccc; }
        input, select, textarea { width: 100%; margin: 10px 0; padding: 10px; border: 1px solid #ccc; border-radius: 6px; }
        button { width: 100%; padding: 10px; background: #27ae60; color: white; border: none; border-radius: 6px; cursor: pointer; }
        table { width: 90%; margin: 30px auto; border-collapse: collapse; }
        th, td { border: 1px solid #ccc; padding: 10px; text-align: center; }
        th { background: #2980b9; color: white; }
        tr:nth-child(even) { background: #f9f9f9; }
        .delete-btn { background:#c0392b; color:white; border:none; padding:6px 10px; border-radius:5px; cursor:pointer; }
    </style>
</head>
<body>

    <h2>ğŸ’° Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø§Ù„ÙŠ Ù„Ù„ÙÙ†Ø¯Ù‚</h2>

    <!-- ÙÙˆØ±Ù… Ø¥Ø¯Ø®Ø§Ù„ Ø¹Ù…Ù„ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø© -->
    <form method="POST">
        <input type="date" name="date" required>

        <select name="type">
    <option value="income">Ø¥ÙŠØ±Ø§Ø¯</option>
    <option value="expense">Ù…ØµØ±ÙˆÙ</option>
</select>


        <input type="number" step="0.01" name="amount" placeholder="Ø§Ù„Ù…Ø¨Ù„Øº" required>

        <select name="currency">
            <option value="EGP">Ø¬Ù†ÙŠÙ‡ Ù…ØµØ±ÙŠ (EGP)</option>
            <option value="USD">Ø¯ÙˆÙ„Ø§Ø± Ø£Ù…Ø±ÙŠÙƒÙŠ (USD)</option>
            <option value="EUR">ÙŠÙˆØ±Ùˆ (EUR)</option>
            <option value="SAR">Ø±ÙŠØ§Ù„ Ø³Ø¹ÙˆØ¯ÙŠ (SAR)</option>
        </select>

        <textarea name="description" placeholder="Ø§Ù„ÙˆØµÙ"></textarea>
        <button type="submit">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©</button>
    </form>


    <!-- ğŸ§¾ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø­Ø³Ø¨ Ø§Ù„Ø¹Ù…Ù„Ø© -->
    <h3>ğŸ“Š Ù…Ù„Ø®Øµ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª ÙˆØ§Ù„Ù…ØµØ±ÙˆÙØ§Øª Ø­Ø³Ø¨ Ø§Ù„Ø¹Ù…Ù„Ø©</h3>
    <table>
        <tr>
            <th>Ø§Ù„Ø¹Ù…Ù„Ø©</th>
            <th>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª</th>
            <th>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</th>
            <th>Ø§Ù„Ø±Ø¨Ø­ Ø§Ù„ØµØ§ÙÙŠ</th>
        </tr>
        {% for s in stats %}
        <tr>
            <td>{{ s.currency }}</td>
            <td style="color:green;">{{ "%.2f"|format(s.income) }}</td>
            <td style="color:red;">{{ "%.2f"|format(s.expense) }}</td>
            <td style="color:blue;">{{ "%.2f"|format(s.profit) }}</td>
        </tr>
        {% endfor %}
    </table>


    <!-- ğŸ§¾ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ© -->
    <h3>ğŸ“… Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ù…Ø³Ø¬Ù„Ø©</h3>
    <table>
        <tr>
            <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
            <th>Ø§Ù„Ù†ÙˆØ¹</th>
            <th>Ø§Ù„Ù…Ø¨Ù„Øº</th>
            <th>Ø§Ù„Ø¹Ù…Ù„Ø©</th>
            <th>Ø§Ù„ÙˆØµÙ</th>
            <th>Ø¥Ø¬Ø±Ø§Ø¡</th>
        </tr>
        {% for t in transactions %}
        <tr>
            <td>{{ t.date }}</td>
            <td>{{ 'Ø¥ÙŠØ±Ø§Ø¯' if t.type == 'income' else 'Ù…ØµØ±ÙˆÙ' }}</td>
            <td>{{ "%.2f"|format(t.amount) }}</td>
            <td>{{ t.currency }}</td>
            <td>{{ t.description }}</td>
            <td style="white-space: nowrap;">
    <div style="display: flex; gap: 5px; justify-content: center;">

        <a href="{{ url_for('finance_edit', id=t.id) }}" style="text-decoration:none;">
            <button style="background:#2980b9;color:white;border:none;padding:6px 10px;
                           border-radius:5px;cursor:pointer;">âœï¸ ØªØ¹Ø¯ÙŠÙ„</button>
        </a>

        <form method="POST" action="{{ url_for('finance_delete', id=t.id) }}" 
              onsubmit="return confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©ØŸ');"
              style="margin: 0;">
            <button type="submit" class="delete-btn"
                    style="background:#c0392b;color:white;border:none;padding:6px 10px;
                           border-radius:5px;cursor:pointer;">ğŸ—‘ Ø­Ø°Ù</button>
        </form>

    </div>
</td>

        </tr>
        {% endfor %}
    </table>

</body>
</html>
